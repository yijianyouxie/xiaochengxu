{"version":3,"sources":["uni-app:///main.js","webpack:///D:/xiaochengxu/uni_tiantianshangcheng/天天商城-多商户多级分销电商系统/uni_modules/tian-article/pages/article/detail.vue?fdc4","webpack:///D:/xiaochengxu/uni_tiantianshangcheng/天天商城-多商户多级分销电商系统/uni_modules/tian-article/pages/article/detail.vue?eacf","webpack:///D:/xiaochengxu/uni_tiantianshangcheng/天天商城-多商户多级分销电商系统/uni_modules/tian-article/pages/article/detail.vue?f8e7","webpack:///D:/xiaochengxu/uni_tiantianshangcheng/天天商城-多商户多级分销电商系统/uni_modules/tian-article/pages/article/detail.vue?3b8a","uni-app:///uni_modules/tian-article/pages/article/detail.vue","webpack:///D:/xiaochengxu/uni_tiantianshangcheng/天天商城-多商户多级分销电商系统/uni_modules/tian-article/pages/article/detail.vue?a502","webpack:///D:/xiaochengxu/uni_tiantianshangcheng/天天商城-多商户多级分销电商系统/uni_modules/tian-article/pages/article/detail.vue?f45e"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,yH,6FAFmBA,EAAE,CAACC,iCAAH,GAAuCC,mBAAvC;AAGnBC,UAAU,CAACC,eAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAmH;AACnH;AAC0D;AACL;AACa;;;AAGlE;AAC8M;AAC9M,gBAAgB,iNAAU;AAC1B,EAAE,4EAAM;AACR,EAAE,iFAAM;AACR,EAAE,0FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,qFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,mWAEN;AACP,KAAK;AACL;AACA,aAAa,0VAEN;AACP,KAAK;AACL;AACA,aAAa,sQAEN;AACP,KAAK;AACL;AACA,aAAa,oSAEN;AACP,KAAK;AACL;AACA,aAAa,sQAEN;AACP;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACrDA;AAAA;AAAA;AAAA;AAA6yB,CAAgB,oyBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACiEj0B;;;AAGA,oF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAJA,6B,CAEA;AACA,8C,eAGA,EACA,qBADA,EAEA,IAFA,kBAEA,CACA,SACA,MADA,EAEA,YAFA,EAGA,iBAHA,EAIA,aAJA,EAKA,SALA,EAMA,WANA,EAOA,eAPA,EAQA,QARA,GAUA,CAbA,EAcA,MAdA,kBAcA,CAdA,EAcA,CACA,eACA,gBACA,CAjBA,EAkBA,MAlBA,oBAkBA,CACA,gBACA,CApBA,EAqBA,aArBA,2BAqBA,CACA,kCACA,gFACA,uBADA,CAEA;AACA,kCACA,iCACA,CACA,CACA,uBACA,CA/BA,EAgCA,YACA,OADA,qBACA,CACA,gDACA,CAHA,EAIA,QAJA,sBAIA,CACA,uCACA,CANA,EAOA,QAPA,sBAOA,CACA,0GACA,MADA,CACA,KADA,CACA,GADA,CACA,QADA,CACA,OADA,CACA,MADA,EACA,CACA,qDACA,CACA,UACA,CAbA,EAcA,WAdA,yBAcA,CACA,2BACA,4BACA,CACA,aACA,CAnBA,EAoBA,QApBA,sBAoBA,CACA,wBACA,yBACA,CACA,aACA,CAzBA,EA0BA,iBA1BA,+BA0BA,CACA,kGACA,CA5BA,EAhCA,EA8DA,WACA,aADA,yBACA,aADA,EACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBADA;AAEA,0BAFA;;AAIA;AACA;AACA;AACA,oBADA;AAEA,kBAFA;;AAIA;AACA,2BADA;AAEA,2BAFA;AAGA;AACA,sCADA;AAEA,0CAFA,EAHA;;AAOA,qBAPA;AAQA,uBARA;AASA,qCATA;AAUA,gEAVA;AAWA,iEAXA;;AAaA;AACA,SADA,CACA,IADA;AAEA,UAFA,CAEA;;AAEA,WADA,MACA,QADA,MACA;AACA;AACA;AACA;AACA,uBADA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAjBA;AAkBA,KAhDA;AAiDA,mBAjDA,6BAiDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WADA,yBACA,OADA;AAEA,WAFA;AAGA,gGAHA;;AAKA,aALA,CAKA,mBALA;AAMA,UANA,CAMA,4BANA;AAOA,WAPA,CAOA,UAPA;AAQA,SARA;AASA,UATA,CASA;;AAEA,WADA,MACA,SADA,MACA;AACA;AACA;AACA,SAFA,MAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,SAFA,MAEA;AACA;AACA;AACA,OAxBA;AAyBA,KArFA;AAsFA,gBAtFA,wBAsFA,IAtFA,EAsFA;AACA;AACA;AACA,0CADA;AAEA,sBAFA;;AAIA;AACA;AACA;AACA,cADA;AAEA,mBAFA;;AAIA,SALA,MAKA;AACA;AACA;AACA,OATA;AAUA,KAtGA;AAuGA,YAvGA,sBAuGA;AACA;AACA;AACA;AACA,gBADA,CACA,mCADA;AAEA,gBAFA,CAEA,8BAFA;AAGA,WAHA,uCAGA,OAHA;AAIA,WAJA;AAKA,iIALA;;AAOA,SAPA,CAOA;AACA,oBADA,EAPA;;AAUA,UAVA,CAUA;;AAEA,WADA,MACA,SADA,MACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OApBA;AAqBA,KA/HA;AAgIA,aAhIA,qBAgIA,IAhIA,EAgIA;AACA;AACA;AACA;AACA;AACA,yBADA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAFA,MAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAvJA;AAwJA,YAxJA,sBAwJA;AACA;AACA,WADA,mDACA,OADA;AAEA,WAFA,CAEA,KAFA;AAGA,SAHA,CAGA;AACA,oBADA,EAHA;;AAMA,UANA,CAMA;;AAEA,WADA,MACA,SADA,MACA;AACA;AACA;AACA,OAXA;AAYA,WAZA,CAYA;AACA;AACA,OAdA;AAeA,KAxKA;AAyKA,SAzKA,mBAyKA;AACA;AACA,4BADA;AAEA;AACA;AACA;AACA,wBADA;;AAGA;AACA,iBADA,mDACA,SADA;AAEA,kBAFA;AAGA,gBAHA,CAGA;AACA;AACA;AACA;AACA,6BADA;;AAGA,aATA;AAUA,iBAVA,CAUA;AACA;AACA;AACA,4BADA;AAEA,6BAFA;;AAIA,aAhBA;AAiBA;AACA,SAzBA;;AA2BA,KArMA;AAsMA,OAtMA,iBAsMA;AACA;AACA;AACA,oBADA;;AAGA;AACA;AACA,kBADA,CACA,sBADA;AAEA,aAFA,CAEA;AACA,6BADA;AAEA,6BAFA,EAFA;;AAMA,aANA,CAMA,KANA;AAOA,WAPA,CAOA;AACA,sBADA,EAPA;;AAUA,YAVA,CAUA;;AAEA,aADA,MACA,SADA,MACA;AACA;AACA;AACA;AACA;AACA,yBADA;;AAGA,SAnBA;AAoBA,aApBA,CAoBA;AACA;AACA;AACA,wBADA;AAEA,yBAFA;;AAIA,SA1BA;AA2BA,OAhCA,MAgCA;AACA;AACA;AACA;AACA,SAFA;AAGA;AACA,KA7OA;AA8OA;;;;AAIA,oBAlPA,4BAkPA,GAlPA,EAkPA;AACA;AACA,SADA;AAEA,uBAFA;;AAIA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA,OAFA,MAEA;AACA;AACA,OAFA,MAEA;AACA,KA/PA,EA9DA,E;;;;;;;;;;;;;ACtEA;AAAA;AAAA;AAAA;AAAipC,CAAgB,imCAAG,EAAC,C;;;;;;;;;;;ACArqC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"uni_modules/tian-article/pages/article/detail.js","sourcesContent":["import 'uni-pages';wx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './uni_modules/tian-article/pages/article/detail.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./detail.vue?vue&type=template&id=8aa676f8&\"\nvar renderjs\nimport script from \"./detail.vue?vue&type=script&lang=js&\"\nexport * from \"./detail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./detail.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!H:\\\\software\\\\小程序\\\\HBuilderX.3.4.7.20220422\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"uni_modules/tian-article/pages/article/detail.vue\"\nexport default component.exports","export * from \"-!H:\\\\software\\\\小程序\\\\HBuilderX.3.4.7.20220422\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!H:\\\\software\\\\小程序\\\\HBuilderX.3.4.7.20220422\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!H:\\\\software\\\\小程序\\\\HBuilderX.3.4.7.20220422\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!H:\\\\software\\\\小程序\\\\HBuilderX.3.4.7.20220422\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!H:\\\\software\\\\小程序\\\\HBuilderX.3.4.7.20220422\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!H:\\\\software\\\\小程序\\\\HBuilderX.3.4.7.20220422\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./detail.vue?vue&type=template&id=8aa676f8&\"","var components\ntry {\n  components = {\n    uniDateformat: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-dateformat/components/uni-dateformat/uni-dateformat\" */ \"@/uni_modules/uni-dateformat/components/uni-dateformat/uni-dateformat.vue\"\n      )\n    },\n    uniLoadMore: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-load-more/components/uni-load-more/uni-load-more\" */ \"@/uni_modules/uni-load-more/components/uni-load-more/uni-load-more.vue\"\n      )\n    },\n    tianIcons: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/tian-mall/components/tian-icons/tian-icons\" */ \"@/uni_modules/tian-mall/components/tian-icons/tian-icons.vue\"\n      )\n    },\n    uniEasyinput: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-easyinput/components/uni-easyinput/uni-easyinput\" */ \"@/uni_modules/uni-easyinput/components/uni-easyinput/uni-easyinput.vue\"\n      )\n    },\n    tianEmpty: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/tian-mall/components/tian-empty/tian-empty\" */ \"@/uni_modules/tian-mall/components/tian-empty/tian-empty.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!H:\\\\software\\\\小程序\\\\HBuilderX.3.4.7.20220422\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!H:\\\\software\\\\小程序\\\\HBuilderX.3.4.7.20220422\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!H:\\\\software\\\\小程序\\\\HBuilderX.3.4.7.20220422\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!H:\\\\software\\\\小程序\\\\HBuilderX.3.4.7.20220422\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!H:\\\\software\\\\小程序\\\\HBuilderX.3.4.7.20220422\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./detail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!H:\\\\software\\\\小程序\\\\HBuilderX.3.4.7.20220422\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!H:\\\\software\\\\小程序\\\\HBuilderX.3.4.7.20220422\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!H:\\\\software\\\\小程序\\\\HBuilderX.3.4.7.20220422\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!H:\\\\software\\\\小程序\\\\HBuilderX.3.4.7.20220422\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!H:\\\\software\\\\小程序\\\\HBuilderX.3.4.7.20220422\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./detail.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view>\r\n\t\t<view class=\"title\">\r\n\t\t\t<text>{{ item.title }}</text>\r\n\t\t\t<view class=\"sub-title\">\r\n\t\t\t\t<text class=\"st-fav\" @click=\"unFav\" v-if=\"isFav\">已收藏</text>\r\n\t\t\t\t<text class=\"st-fav\" @click=\"fav\" v-else>收藏</text>\r\n\t\t\t\t<uni-dateformat class=\"font-20 margin-left-20\" :date=\"item.publish_date\" format=\"yyyy/MM/dd\"\r\n\t\t\t\t\t:threshold=\"[60000, 3600000]\"></uni-dateformat>\r\n\t\t\t\t<text class=\"st-item\">浏览：{{ item.view_count }}</text>\r\n\t\t\t\t<text class=\"st-item\" v-if=\"item.source_from\">{{ item.source_from }}</text>\r\n\t\t\t\t<text class=\"st-item\" v-else-if=\"item.user_id\">上传用户：{{ item.user_id }}</text>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<uni-load-more v-if=\"!loaded\" status=\"loading\" class=\"margin-top-60\"></uni-load-more>\r\n\t\t<block v-if=\"loaded\">\r\n\t\t\t<ad v-if=\"topAdpid\" :adpid=\"topAdpid\" :unit-id=\"topAdpid\" @load=\"adLoad\" @error=\"adError\" @close=\"adClose\">\r\n\t\t\t</ad>\r\n\t\t\t<view class=\"content\">\r\n\t\t\t\t<rich-text :nodes=\"item.content\"></rich-text>\r\n\t\t\t</view>\r\n\t\t\t<ad v-if=\"bottomAdpid\" :adpid=\"bottomAdpid\" :unit-id=\"bottomAdpid\" @load=\"adLoad\" @error=\"adError\"\r\n\t\t\t\t@close=\"adClose\"></ad>\r\n\t\t</block>\r\n\t\t<view class=\"text-center padding-40\" v-if=\"canGetDoubleScore\" @click=\"getDoubleScore(item.task, 'article')\">\r\n\t\t\t<tian-icons type=\"chakanshipin\" size=\"40\" color=\"#eb4e38\"><text class=\"font-36\">{{item.task.name}}</text>\r\n\t\t\t</tian-icons>\r\n\t\t</view>\r\n\t\t<block v-if=\"item.comment_status\">\r\n\t\t\t<view class=\"ti-flex padding-22\">\r\n\t\t\t\t<image :src=\"userInfo.avatar\" mode=\"aspectFill\" class=\"image-width-60 bg-white border-radius padding-2\">\r\n\t\t\t\t</image>\r\n\t\t\t\t<uni-easyinput v-model=\"content\" placeholder=\"写下您的评论...\" class=\"margin-left-16 flex-1\">\r\n\t\t\t\t\t<template v-slot:right>\r\n\t\t\t\t\t\t<button type=\"primary\" class=\"cuboid\" @click=\"submitComment()\">评论</button>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</uni-easyinput>\r\n\t\t\t</view>\r\n\t\t\t<!-- 评论 -->\r\n\t\t\t<view class=\"\">\r\n\t\t\t\t<view v-for=\"(item, index) in commentList\" :key=\"index\"\r\n\t\t\t\t\tclass=\"comments bg-white border-radius padding-22 \">\r\n\t\t\t\t\t<image :src=\"item.user.avatar\" mode=\"aspectFill\"\r\n\t\t\t\t\t\tclass=\"image-width-60 bg-white border-radius padding-2\"></image>\r\n\t\t\t\t\t<view class=\"margin-left-18 flex-1\">\r\n\t\t\t\t\t\t<view class=\"\">\r\n\t\t\t\t\t\t\t<text>{{ item.user.nickname }}</text>\r\n\t\t\t\t\t\t\t<uni-dateformat class=\"font-20 margin-left-20 colorGray\" :date=\"item.comment_date\"\r\n\t\t\t\t\t\t\t\tformat=\"yyyy/MM/dd\" :threshold=\"[60000, 3600000]\"></uni-dateformat>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"font-24\">\r\n\t\t\t\t\t\t\t<text>{{ item.comment_content }}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<tian-empty v-if=\"commentList.length == 0\" text=\"暂无评论\" marginTop=\"200\" mode=\"liuyan\"\r\n\t\t\t\t\tpaddingBottom=\"200\"></tian-empty>\r\n\t\t\t\t<uni-load-more v-else :status=\"loadingType\"></uni-load-more>\r\n\t\t\t</view>\r\n\t\t</block>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\tconst db = uniCloud.database();\r\n\timport adMixin from '@/common/mixin/ad';\r\n\t// 表查询配置\r\n\tconst dbCollectionName = 'opendb-news-articles';\r\n\timport AD from '@/common/js/ad.js';\r\n\r\n\texport default {\r\n\t\tmixins: [adMixin],\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tid: '',\r\n\t\t\t\tisFav: false,\r\n\t\t\t\tisGetScore: false,\r\n\t\t\t\tloaded: false,\r\n\t\t\t\twhere: '',\r\n\t\t\t\tcontent: '',\r\n\t\t\t\tcommentList: [],\r\n\t\t\t\titem: {}\r\n\t\t\t};\r\n\t\t},\r\n\t\tonLoad(e) {\r\n\t\t\tthis.id = e.id;\r\n\t\t\tthis.loadData();\r\n\t\t},\r\n\t\tonShow() {\r\n\t\t\tthis.checkFav();\r\n\t\t},\r\n\t\tonReachBottom() {\r\n\t\t\tconsole.log('加载下一页评论，滑动到底部，增加积分');\r\n\t\t\tif (this.item.task && !this.isGetScore && this.checkBindMobile(\"必须绑定手机才能做任务\")) {\r\n\t\t\t\tthis.isGetScore = true;\r\n\t\t\t\t//完成阅读，增加积分\r\n\t\t\t\tif (this.item.task.normal) {\r\n\t\t\t\t\tthis.articleRead(this.item.task);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.loadCommentData();\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\tisLogin() {\r\n\t\t\t\treturn this.$store.getters['user/isTokenValid'];\r\n\t\t\t},\r\n\t\t\tuserInfo() {\r\n\t\t\t\treturn this.$store.state.user.userInfo;\r\n\t\t\t},\r\n\t\t\tadConfig() {\r\n\t\t\t\tif (this.$store.state && this.$store.state.app.adConfig && this.$store.state.app.adConfig.article && this\r\n\t\t\t\t\t.$store.state.app.adConfig.article.detail) {\r\n\t\t\t\t\treturn this.$store.state.app.adConfig.article.detail;\r\n\t\t\t\t}\r\n\t\t\t\treturn {};\r\n\t\t\t},\r\n\t\t\tbottomAdpid() {\r\n\t\t\t\tif (this.adConfig.bottom) {\r\n\t\t\t\t\treturn this.adConfig.bottom;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\ttopAdpid() {\r\n\t\t\t\tif (this.adConfig.top) {\r\n\t\t\t\t\treturn this.adConfig.top;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tcanGetDoubleScore() {\r\n\t\t\t\treturn this.item.task && this.item.task.multiple && (this.adConfig.signin || this.adConfig.video);\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tsubmitComment(reply_comment) {\r\n\t\t\t\tif (!this.isLogin) {\r\n\t\t\t\t\tthis.navToLoginNotice();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (!this.content) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\ttitle: '请输入评论内容'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: '提交中',\r\n\t\t\t\t\tmask: true\r\n\t\t\t\t});\r\n\t\t\t\tlet item = {\r\n\t\t\t\t\tarticle_id: this.id,\r\n\t\t\t\t\tuser_id: db.env.uid,\r\n\t\t\t\t\tuser: {\r\n\t\t\t\t\t\tavatar: this.userInfo.avatar,\r\n\t\t\t\t\t\tnickname: this.userInfo.nickname,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tlike_count: 0,\r\n\t\t\t\t\tcomment_type: 0,\r\n\t\t\t\t\tcomment_content: this.content,\r\n\t\t\t\t\treply_comment_id: reply_comment ? reply_comment._id : '',\r\n\t\t\t\t\treply_user_id: reply_comment ? reply_comment.user_id : ''\r\n\t\t\t\t};\r\n\t\t\t\tdb.collection('opendb-news-comments')\r\n\t\t\t\t\t.add(item)\r\n\t\t\t\t\t.then(({\r\n\t\t\t\t\t\tresult\r\n\t\t\t\t\t}) => {\r\n\t\t\t\t\t\tconsole.log('res', result);\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '发布成功'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\titem._id = result.id;\r\n\t\t\t\t\t\titem.user_id = [this.userInfo];\r\n\t\t\t\t\t\titem.comment_date = Date.now();\r\n\t\t\t\t\t\tlet newData = [item];\r\n\t\t\t\t\t\tthis.buildComment(newData);\r\n\t\t\t\t\t\tthis.commentList = newData.concat(this.commentList);\r\n\t\t\t\t\t\tthis.content = '';\r\n\t\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tloadCommentData() {\r\n\t\t\t\tif (!this.item.comment_status) {\r\n\t\t\t\t\tconsole.log(\"文章不支持评论\")\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.loadingType == 'noMore') {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.loadingType == 'loading';\r\n\t\t\t\tthis.page++;\r\n\t\t\t\t//默认查询第一层\r\n\t\t\t\tdb.collection('opendb-news-comments')\r\n\t\t\t\t\t.where(`article_id==\"${this.id}\" && reply_comment_id==\"\"`)\r\n\t\t\t\t\t.field(\r\n\t\t\t\t\t\t'comment_content,like_count,comment_type,reply_user_id,reply_comment_id,comment_date,user'\r\n\t\t\t\t\t)\r\n\t\t\t\t\t.orderBy('comment_date desc')\r\n\t\t\t\t\t.skip((this.page - 1) * this.limit)\r\n\t\t\t\t\t.limit(this.limit)\r\n\t\t\t\t\t.get()\r\n\t\t\t\t\t.then(({\r\n\t\t\t\t\t\tresult\r\n\t\t\t\t\t}) => {\r\n\t\t\t\t\t\tif (result.data.length < this.limit) {\r\n\t\t\t\t\t\t\tthis.loadingType = 'noMore';\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.loadingType = 'more';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.buildComment(result.data);\r\n\r\n\t\t\t\t\t\tif (this.page == 1) {\r\n\t\t\t\t\t\t\tthis.commentList = result.data;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.commentList = this.commentList.concat(result.data);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tbuildComment(data) {\r\n\t\t\t\t//处理头像\r\n\t\t\t\tlet info = {\r\n\t\t\t\t\tavatar: '/static/missing-face.png',\r\n\t\t\t\t\tnickname: '匿名'\r\n\t\t\t\t};\r\n\t\t\t\tdata.forEach(item => {\r\n\t\t\t\t\tif (item.user) {\r\n\t\t\t\t\t\titem.user = {\r\n\t\t\t\t\t\t\t...info,\r\n\t\t\t\t\t\t\t...item.user\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\titem.user = info;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tloadData() {\r\n\t\t\t\tlet data = this.getItemData();\r\n\t\t\t\tthis.buildData(data);\r\n\t\t\t\tdb.action('article_read')\r\n\t\t\t\t\t.collection('opendb-news-articles,uni-id-users')\r\n\t\t\t\t\t.foreignKey('opendb-news-articles.user_id')\r\n\t\t\t\t\t.where(`article_status==1 && _id==\"${this.id}\"`)\r\n\t\t\t\t\t.field(\r\n\t\t\t\t\t\t'avatar,title,excerpt,publish_date,like_count,source_from,view_count,user_id.nickname,content,comment_count,comment_status'\r\n\t\t\t\t\t)\r\n\t\t\t\t\t.get({\r\n\t\t\t\t\t\tgetOne: true\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then(({\r\n\t\t\t\t\t\tresult\r\n\t\t\t\t\t}) => {\r\n\t\t\t\t\t\t// console.log(\"result.data\", result.data)\r\n\t\t\t\t\t\tthis.buildData(result.data);\r\n\t\t\t\t\t\t//更新今日已读文章列表\r\n\t\t\t\t\t\tif (this.isLogin) {\r\n\t\t\t\t\t\t\tthis.$store.commit('mall/UPDATE_ARTICLE_READ', this.item._id);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.loaded = true;\r\n\t\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tbuildData(item) {\r\n\t\t\t\tif (!item) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tuni.setNavigationBarTitle({\r\n\t\t\t\t\ttitle: item.title\r\n\t\t\t\t});\r\n\t\t\t\t//微信中不支持使用过滤器\r\n\t\t\t\tif (item.avatar) {\r\n\t\t\t\t\titem.avatar = this.$thumbImg(item.avatar, `750x400`);\r\n\t\t\t\t}\r\n\t\t\t\tif (typeof item.user_id == 'object') {\r\n\t\t\t\t\tif (item.user_id && item.user_id.length > 0) {\r\n\t\t\t\t\t\titem.user_id = item.user_id[0].nickname;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\titem.user_id = '';\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t//处理文中的图片\r\n\t\t\t\tif (item.content) {\r\n\t\t\t\t\titem.content = this.$repairImageSize(item.content);\r\n\t\t\t\t}\r\n\t\t\t\tthis.item = item;\r\n\t\t\t},\r\n\t\t\tcheckFav() {\r\n\t\t\t\tdb.collection('opendb-news-favorite')\r\n\t\t\t\t\t.where(`user_id==$cloudEnv_uid && article_id==\"${this.id}\"`)\r\n\t\t\t\t\t.field('_id')\r\n\t\t\t\t\t.get({\r\n\t\t\t\t\t\tgetOne: true\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then(({\r\n\t\t\t\t\t\tresult\r\n\t\t\t\t\t}) => {\r\n\t\t\t\t\t\tconsole.log('checkFav result', result);\r\n\t\t\t\t\t\tthis.isFav = result.data.length > 0;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(err => {\r\n\t\t\t\t\t\tconsole.log('未登录');\r\n\t\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tunFav() {\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\tcontent: '是否确定取消收藏？',\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\tuni.showLoading({\r\n\t\t\t\t\t\t\t\tmask: true\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tdb.collection('opendb-news-favorite')\r\n\t\t\t\t\t\t\t\t.where(`user_id==$cloudEnv_uid && article_id==\"${this.id}\"`)\r\n\t\t\t\t\t\t\t\t.remove()\r\n\t\t\t\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\t\t\t\tthis.isFav = false;\r\n\t\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\t\ttitle: '取消成功'\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.catch(() => {\r\n\t\t\t\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\t\t\t\t\ttitle: '取消失败'\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tfav() {\r\n\t\t\t\tif (this.isLogin) {\r\n\t\t\t\t\tuni.showLoading({\r\n\t\t\t\t\t\tmask: true\r\n\t\t\t\t\t});\r\n\t\t\t\t\t//收藏，必须登录\r\n\t\t\t\t\tdb.action('article_favorite')\r\n\t\t\t\t\t\t.collection('opendb-news-favorite')\r\n\t\t\t\t\t\t.where({\r\n\t\t\t\t\t\t\tuser_id: db.env.uid,\r\n\t\t\t\t\t\t\tarticle_id: this.id\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.field('_id')\r\n\t\t\t\t\t\t.get({\r\n\t\t\t\t\t\t\tgetOne: true\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.then(({\r\n\t\t\t\t\t\t\tresult\r\n\t\t\t\t\t\t}) => {\r\n\t\t\t\t\t\t\tthis.isFav = true;\r\n\t\t\t\t\t\t\tconsole.log('fav result');\r\n\t\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: '收藏成功'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.catch(() => {\r\n\t\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\t\t\ttitle: '收藏失败'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\t//提示登录\r\n\t\t\t\t\tthis.navToLoginNotice(() => {\r\n\t\t\t\t\t\tthis.checkFav();\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * 提示消息,页面可以单独自定义\r\n\t\t\t * @param {Object} res\r\n\t\t\t */\r\n\t\t\tfinishTaskResult(res) {\r\n\t\t\t\tthis.item.task.log = {\r\n\t\t\t\t\t...res,\r\n\t\t\t\t\ttask: undefined\r\n\t\t\t\t};\r\n\t\t\t\tthis.item.task.multiple = res.task.multiple;\r\n\t\t\t\tif (res.getDouble) {\r\n\t\t\t\t\tthis.$message(`阅读翻倍奖励 +${res.task.bounty}`);\r\n\t\t\t\t} else if (res.getScore) {\r\n\t\t\t\t\tthis.$message(`阅读奖励 +${res.task.bounty}`);\r\n\t\t\t\t} else if (res.needMore) {\r\n\t\t\t\t\tthis.$message(`已完成${res.amount}次`);\r\n\t\t\t\t} else if (res.result) {}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n</script>\r\n<style>\r\n\tpage {\r\n\t\tbackground: #ffffff;\r\n\t}\r\n\r\n\t.title {\r\n\t\tfont-size: 40rpx;\r\n\t\tpadding: 22rpx;\r\n\t\tborder-bottom: 2rpx solid #e8e8e8;\r\n\t}\r\n\r\n\t.title .sub-title {\r\n\t\tfont-size: 24rpx;\r\n\t\tmargin-top: 16rpx;\r\n\t\tcolor: #adadad;\r\n\t}\r\n\r\n\t.title .st-fav {\r\n\t\tcolor: #0000ff;\r\n\t}\r\n\r\n\t.title .st-item {\r\n\t\tmargin-left: 18rpx;\r\n\t}\r\n\r\n\t.content {\r\n\t\tpadding: 22rpx;\r\n\t\tline-height: 1.6;\r\n\t\tfont-size: 32rpx;\r\n\t\toverflow: hidden;\r\n\t}\r\n\r\n\t.content>>>p {\r\n\t\tmargin-top: 12rpx;\r\n\t}\r\n\r\n\t.content>>>img {\r\n\t\tmax-width: 100%;\r\n\t\theight: auto;\r\n\t}\r\n\r\n\t.image {\r\n\t\twidth: 750rpx;\r\n\t\theight: 400rpx;\r\n\t}\r\n\r\n\t.comments {\r\n\t\tdisplay: flex;\r\n\t}\r\n</style>\n","import mod from \"-!H:\\\\software\\\\小程序\\\\HBuilderX.3.4.7.20220422\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!H:\\\\software\\\\小程序\\\\HBuilderX.3.4.7.20220422\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!H:\\\\software\\\\小程序\\\\HBuilderX.3.4.7.20220422\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!H:\\\\software\\\\小程序\\\\HBuilderX.3.4.7.20220422\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!H:\\\\software\\\\小程序\\\\HBuilderX.3.4.7.20220422\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!H:\\\\software\\\\小程序\\\\HBuilderX.3.4.7.20220422\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!H:\\\\software\\\\小程序\\\\HBuilderX.3.4.7.20220422\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./detail.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!H:\\\\software\\\\小程序\\\\HBuilderX.3.4.7.20220422\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!H:\\\\software\\\\小程序\\\\HBuilderX.3.4.7.20220422\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!H:\\\\software\\\\小程序\\\\HBuilderX.3.4.7.20220422\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!H:\\\\software\\\\小程序\\\\HBuilderX.3.4.7.20220422\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!H:\\\\software\\\\小程序\\\\HBuilderX.3.4.7.20220422\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!H:\\\\software\\\\小程序\\\\HBuilderX.3.4.7.20220422\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!H:\\\\software\\\\小程序\\\\HBuilderX.3.4.7.20220422\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./detail.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1650966470843\n      var cssReload = require(\"H:/software/小程序/HBuilderX.3.4.7.20220422/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}