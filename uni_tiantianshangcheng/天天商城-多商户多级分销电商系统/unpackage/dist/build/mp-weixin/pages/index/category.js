(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/category"],{1544:function(n,t,e){"use strict";var o=e("8f35"),a=e.n(o);a.a},"3ba5":function(n,t,e){"use strict";(function(n){e("566f");o(e("66fd"));var t=o(e("8457"));function o(n){return n&&n.__esModule?n:{default:n}}wx.__webpack_require_UNI_MP_PLUGIN__=e,n(t.default)}).call(this,e("543d")["createPage"])},6774:function(n,t,e){"use strict";e.r(t);var o=e("d458"),a=e.n(o);for(var i in o)"default"!==i&&function(n){e.d(t,n,(function(){return o[n]}))}(i);t["default"]=a.a},8457:function(n,t,e){"use strict";e.r(t);var o=e("beea"),a=e("6774");for(var i in a)"default"!==i&&function(n){e.d(t,n,(function(){return a[n]}))}(i);e("1544");var r,s=e("f0c5"),u=Object(s["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],r);t["default"]=u.exports},"8f35":function(n,t,e){},beea:function(n,t,e){"use strict";e.d(t,"b",(function(){return a})),e.d(t,"c",(function(){return i})),e.d(t,"a",(function(){return o}));var o={tianSearchBar:function(){return Promise.all([e.e("common/vendor"),e.e("uni_modules/tian-mall/components/tian-search-bar/tian-search-bar")]).then(e.bind(null,"6c81"))},tianGoodsSku:function(){return Promise.all([e.e("common/vendor"),e.e("uni_modules/tian-mall/components/tian-goods-sku/tian-goods-sku")]).then(e.bind(null,"5a97"))}},a=function(){var n=this,t=n.$createElement;n._self._c},i=[]},d458:function(n,t,e){"use strict";(function(n,o){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(e("a963"));function i(n){return n&&n.__esModule?n:{default:n}}var r=n.database(),s={mixins:[a.default],data:function(){return{goods:{},mainCategory:{},categories:[],subCategories:[],subCateHeight:100,options:{scrollLeft:0,scrollTop:0,sv:"",mainCurrentId:"",subCurrentId:""}}},onLoad:function(n){n.id&&(this.options.mainCurrentId=n.id),this.loadData()},computed:{goodsCondition:function(){return console.log("change goods condition"),'category_id=="'.concat(this.options.subCurrentId,'"')},searchStyle:function(){return"padding-top:".concat(this.systemInfo.custom.top,"px;")}},onShow:function(){},onHide:function(){var n=this;o.showTabBar(),setTimeout((function(){n.$refs.tianSkuPop.close()}),500)},mounted:function(){},methods:{subCategoryScroll:function(n){},loadList:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";getApp().globalData.searchText=n,o.navigateTo({url:"/pages/product/list"})},loadData:function(){var n=this;r.collection("tian-mall-categories").where("status==true").field("parent_id,name,icon,sort,ad_banner,ad_open_url").orderBy("sort asc").get({getTree:!0}).then((function(t){var e=t.result,o=!1;e.data.forEach((function(t,e){t.index=e,t.ad_banner?t.ad_banner=n.$thumbImg(t.ad_banner,"450x150"):t.ad_banner="https://vkceyugu.cdn.bspapp.com/VKCEYUGU-3fbab731-e993-47e6-882f-a74e444709a3/11b41427-1164-4254-a723-aacec29d1eb6.jpg",t.icon=n.$thumbImg(t.icon,"80x80"),n.options.mainCurrentId&&t._id==n.options.mainCurrentId&&(o=t),t.children.forEach((function(t,e){t.children&&t.children.forEach((function(t){t.icon=n.$thumbImg(t.icon,"130x130")}))}))})),n.categories=e.data,o||(o=n.categories[0]),n.changeMainCategory(o)}))},adClick:function(){this.mainCategory.ad_open_url&&this.navTo(this.mainCategory.ad_open_url)},changeMainCategory:function(n){var t=-1;return this.categories.forEach((function(e,o){e._id==n._id&&(t=o),e.className=""})),-1==t?(console.log("主分类id不在范围内",n),!1):this.options.mainCurrentId==n._id?(console.log("重复点击无效",n),!1):(this.options.mainCurrentId=n._id,this.mainCategory=this.categories[t],this.mainCategory.className="current",this.subCategories=this.categories[t].children,this.subCategories.length>0?this.options.subCurrentId=this.subCategories[0]._id:this.options.subCurrentId=this.options.mainCurrentId,0!=t&&(this.categories[t-1].className="prev"),void(t!=this.categories.length-1&&(this.categories[t+1].className="next")))},changeSubCategory:function(n,t){var e=this;this.options.subCurrentId=n._id,setTimeout((function(){e.options.scrollTop=30*t-60}),300)},openSku:function(n){console.log("openSku",n),this.goods=n,this.$refs.tianSkuPop.open()}}};t.default=s}).call(this,e("a9ff")["default"],e("543d")["default"])}},[["3ba5","common/runtime","common/vendor"]]]);